# ============================================
# Fix HTTP 406 Not Acceptable Error - /pawel/ only
# ============================================

# TEST: Verify .htaccess is being applied
<IfModule mod_headers.c>
    Header set X-DX-HTACCESS "pawel-on"
</IfModule>

# Disable MultiViews content negotiation (prevents 406 errors)
<IfModule mod_negotiation.c>
    Options -MultiViews
</IfModule>

# Force HTML content type for all files in this directory
<FilesMatch ".*">
    ForceType text/html
</FilesMatch>

# Remove ModSecurity rules that block based on headers
<IfModule mod_security.c>
    # OWASP CRS rules that cause 406 for programmatic clients
    SecRuleRemoveById 900015
    SecRuleRemoveById 900016
    SecRuleRemoveById 960015
    SecRuleRemoveById 960017
    SecRuleRemoveById 960024
    
    # OWASP CRS 920 series - Protocol Enforcement
    SecRuleRemoveById 920100
    SecRuleRemoveById 920120
    SecRuleRemoveById 920160
    SecRuleRemoveById 920170
    SecRuleRemoveById 920180
    SecRuleRemoveById 920200
    SecRuleRemoveById 920230
    SecRuleRemoveById 920270
    SecRuleRemoveById 920280
</IfModule>
